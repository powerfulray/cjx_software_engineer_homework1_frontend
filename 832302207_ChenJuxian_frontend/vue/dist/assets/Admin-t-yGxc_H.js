/* empty css                  */import{l as P,m as j,n as s,p as T,q as $,c as A,a as g,b as t,u as V,w as r,s as J,t as O,v as R,x as F,y as I,o as M,z as y,g as u,A as L,B as G,C as H,D as _}from"./index-Ct-Hh4vc.js";j.$config?.serverUrl;const p=P.create({baseURL:"http://101.42.170.79:9999",timeout:3e4});p.interceptors.request.use(n=>(n.headers["Content-Type"]="application/json;charset=utf-8",n),n=>Promise.reject(n));p.interceptors.response.use(n=>{let e=n.data;return typeof e=="string"&&(e=e&&JSON.parse(e)),e},n=>(n.response.status===404?s.error("未找到请求接口"):n.response.status===500?s.error("系统异常，请查看后端控制台报错"):console.error(n.message),Promise.reject(n)));const K={class:"card",style:{"margin-bottom":"5px"}},Q={class:"card",style:{"margin-bottom":"5px"}},W={class:"card",style:{"margin-bottom":"5px"}},X={class:"card"},Y={class:"dialog-footer"},le={__name:"Admin",setup(n){const e=T({username:null,name:null,pageNum:1,pageSize:5,total:0,tableData:[],formVisible:!1,form:{},rules:{username:[{required:!0,message:"请填写账号",trigger:"blur"}],name:[{required:!0,message:"请填写名称",trigger:"blur"}],phone:[{required:!0,message:"请填写手机",trigger:"blur"}],email:[{required:!0,message:"请填写邮箱",trigger:"blur"}]},rows:[]}),b=$(),i=()=>{p.get("/admin/selectPage",{params:{pageNum:e.pageNum,pageSize:e.pageSize,name:e.name,username:e.username}}).then(a=>{a.code==="200"?(e.tableData=a.data.list,e.total=a.data.total,console.log(a.data)):s.error(a.msg)})};i();const x=()=>{e.username=null,e.name=null,i()},C=()=>{e.formVisible=!0,e.form={}},v=()=>{b.value.validate(a=>{a&&p.post("admin/add",e.form).then(l=>{l.code==="200"?(e.formVisible=!1,s.success("新增成功"),i()):s.error(l.msg)})})},w=a=>{e.form=JSON.parse(JSON.stringify(a)),e.formVisible=!0},k=()=>{b.value.validate(a=>{a&&p.put("/admin/update",e.form).then(l=>{l.code==="200"?(e.formVisible=!1,s.success("修改成功"),i()):s.error(l.msg)})})},h=()=>{e.form.id?k():v()},E=a=>{_.confirm("删除后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(l=>{p.delete("/admin/delete/"+a).then(d=>{d.code==="200"?(s.success("删除成功"),i()):s.error(d.msg)})}).catch(l=>{})},z=a=>{e.rows=a,console.log(a)},S=()=>{if(e.rows.length===0){s.warning("请选择数据");return}_.confirm("删除后无法恢复，您确认删除吗？","删除确认",{type:"warning"}).then(a=>{p.delete("/admin/deleteBatch",{data:e.rows}).then(l=>{l.code==="200"?(s.success("批量删除成功"),i()):s.error(l.msg)})}).catch(a=>{})};return(a,l)=>{const d=J,m=O,f=L,N=R,U=F,c=H,B=G,q=I;return M(),A("div",null,[g("div",K,[t(d,{clearable:"",onClear:i,style:{width:"260px","margin-right":"5px"},modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=o=>e.username=o),placeholder:"请输入账号查询","prefix-icon":V(y)},null,8,["modelValue","prefix-icon"]),t(d,{clearable:"",onClear:i,style:{width:"260px","margin-right":"5px"},modelValue:e.name,"onUpdate:modelValue":l[1]||(l[1]=o=>e.name=o),placeholder:"请输入名称查询","prefix-icon":V(y)},null,8,["modelValue","prefix-icon"]),t(m,{type:"primary",onClick:i},{default:r(()=>[...l[10]||(l[10]=[u("查 询",-1)])]),_:1}),t(m,{type:"warning",onClick:x},{default:r(()=>[...l[11]||(l[11]=[u("重 置",-1)])]),_:1})]),g("div",Q,[t(m,{type:"primary",onClick:C},{default:r(()=>[...l[12]||(l[12]=[u("新 增",-1)])]),_:1}),t(m,{type:"danger",onClick:S},{default:r(()=>[...l[13]||(l[13]=[u("批量删除",-1)])]),_:1}),t(m,{type:"success"},{default:r(()=>[...l[14]||(l[14]=[u("批量导入",-1)])]),_:1}),t(m,{type:"info"},{default:r(()=>[...l[15]||(l[15]=[u("批量导出",-1)])]),_:1})]),g("div",W,[t(N,{data:e.tableData,style:{width:"100%"},onSelectionChange:z,"header-cell-style":{color:"#333",backgroundColor:"#eaf4ff"}},{default:r(()=>[t(f,{type:"selection",width:"55"}),t(f,{prop:"username",label:"账号"}),t(f,{prop:"name",label:"名称"}),t(f,{prop:"phone",label:"电话"}),t(f,{prop:"email",label:"邮箱"}),t(f,{label:"操作",width:"100"},{default:r(o=>[t(m,{type:"primary",icon:"Edit",circle:"",onClick:D=>w(o.row)},null,8,["onClick"]),t(m,{type:"danger",icon:"Delete",circle:"",onClick:D=>E(o.row.id)},null,8,["onClick"])]),_:1})]),_:1},8,["data"])]),g("div",X,[t(U,{"current-page":e.pageNum,"onUpdate:currentPage":l[2]||(l[2]=o=>e.pageNum=o),"page-size":e.pageSize,"onUpdate:pageSize":l[3]||(l[3]=o=>e.pageSize=o),layout:"total, sizes,prev, pager, next,jumper","page-sizes":[5,8,10],total:e.total,onCurrentChange:i,onSizeChange:i},null,8,["current-page","page-size","total"])]),t(q,{title:"新增/编辑通讯录信息",modelValue:e.formVisible,"onUpdate:modelValue":l[9]||(l[9]=o=>e.formVisible=o),width:"35%","destroy-on-close":""},{footer:r(()=>[g("div",Y,[t(m,{onClick:l[8]||(l[8]=o=>e.formVisible=!1)},{default:r(()=>[...l[16]||(l[16]=[u("取 消",-1)])]),_:1}),t(m,{type:"primary",onClick:h},{default:r(()=>[...l[17]||(l[17]=[u("保 存",-1)])]),_:1})])]),default:r(()=>[t(B,{ref_key:"formRef",ref:b,model:e.form,rules:e.rules,"label-width":"80px",style:{padding:"20px 30px 10px 0"}},{default:r(()=>[t(c,{prop:"username",label:"账号"},{default:r(()=>[t(d,{modelValue:e.form.username,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.username=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(c,{prop:"name",label:"名称"},{default:r(()=>[t(d,{modelValue:e.form.name,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(c,{prop:"phone",label:"电话"},{default:r(()=>[t(d,{modelValue:e.form.phone,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.phone=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(c,{prop:"email",label:"邮箱"},{default:r(()=>[t(d,{modelValue:e.form.email,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.email=o),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}};export{le as default};
